module xbitreverse #(NBITS=32:NBITS>1 & NBITS<=32)(
    input a[NBITS],  // clock
    input rev,
    output out[NBITS]
  ) {
  mux_2 muxes[NBITS];
  var n;
  always {
    muxes.s0 = rev;
    for(n=0;n<NBITS;n++){
      muxes.in[n][0] = a[n];
      muxes.in[NBITS-n][1] = a[n];  
  }
    
    out = muxes.out;
  }
}
